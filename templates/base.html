<!doctype html>
<html lang="zh-CN" class="">
  <meta id="color-scheme" name="color-scheme" content="" />
  {% if debug_mode %}
  <!--debug mode-->
  <script>
    const ws = new WebSocket("ws://localhost:9001");
    ws.onmessage = (event) => {
      console.log("Reloading page...");
      window.location.reload(true);
    };
  </script>
  <meta
    http-equiv="Cache-Control"
    content="no-cache, no-store, must-revalidate"
  />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <!--debug mode-->
  {% endif %}
  <script>
    let isDark = sessionStorage.getItem("is_dark_theme");
    const colorSchemeMeta = document.getElementById("color-scheme");
    if (isDark === null) {
      isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      sessionStorage.setItem("is_dark_theme", isDark);
    } else {
      isDark = isDark === "true";
    }
    if (isDark) {
      document.documentElement.classList.add("dark");
      colorSchemeMeta.setAttribute("content", "dark");
    } else {
      colorSchemeMeta.setAttribute("content", "light");
    }
  </script>
  {% block theme_button %}
  <script type="module">
    const hamburgerToggleBtn = document.getElementById("hamburger-toggle");
    const menuIconLines = hamburgerToggleBtn.querySelectorAll("svg > line");
    const overLay = document.getElementById("navOverlay");
    const nav = overLay.querySelector("nav");
    hamburgerToggleBtn.addEventListener("click", () => {
      menuIconLines[0].classList.toggle("-rotate-45");
      menuIconLines[1].classList.toggle("scale-x-[0]");
      menuIconLines[2].classList.toggle("rotate-45");
      overLay.classList.toggle("opacity-0");
      overLay.classList.toggle("pointer-events-none");
      nav.classList.toggle("-translate-y-40");
      nav.classList.toggle("opacity-0");
      document.body.classList.toggle("overflow-hidden");
    });
    // Close overlay with Escape key
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !overLay.classList.contains("opacity-0")) {
        hamburgerToggleBtn.click();
      }
    });
  </script>
  <script type="module">
    const themeToggleBtn = document.getElementById("theme-toggle");
    const sun = document.getElementById("icon-sun");
    const moon = document.getElementById("icon-moon");
    if (isDark) {
      // change to moon
      sun.classList.remove("opacity-100", "scale-100", "rotate-0", "ease-in");
      sun.classList.add("opacity-0", "scale-75", "-rotate-90", "ease-out");
      moon.classList.remove("opacity-0", "scale-75", "rotate-90", "ease-out");
      moon.classList.add("opacity-100", "scale-100", "rotate-0", "ease-in");
    }
    themeToggleBtn.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      const isDark = document.documentElement.classList.contains("dark");
      sessionStorage.setItem("is_dark_theme", isDark);
      if (isDark) {
        // set dark scheme meta
        colorSchemeMeta.setAttribute("content", "dark");

        // 切到 Moon
        sun.classList.remove("opacity-100", "scale-100", "rotate-0", "ease-in");
        sun.classList.add("opacity-0", "scale-75", "-rotate-90", "ease-out");

        moon.classList.remove("opacity-0", "scale-75", "rotate-90", "ease-out");
        moon.classList.add("opacity-100", "scale-100", "rotate-0", "ease-in");
      } else {
        // set light scheme meta
        colorSchemeMeta.setAttribute("content", "light");

        // 切回 Sun
        moon.classList.remove(
          "opacity-100",
          "scale-100",
          "rotate-0",
          "ease-in",
        );
        moon.classList.add("opacity-0", "scale-75", "rotate-90", "ease-out");

        sun.classList.remove("opacity-0", "scale-75", "-rotate-90", "ease-out");
        sun.classList.add("opacity-100", "scale-100", "rotate-0", "ease-in");
      }
    });
  </script>
  {% endblock theme_button %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    {% block head %}
    <title>{% block title %}{% endblock title %}</title>
    {% endblock head %}
    <link rel="stylesheet" type="text/css" href="/static/css/index.css" />
    <style>
      button,
      [role="button"] {
        cursor: pointer;
      }
    </style>
    <link rel="icon" type="image/png" href="/static/img/avatar.png" />
  </head>
  {% block header %}
  <div
    id="navOverlay"
    class="sm:hidden fixed inset-0 bg-white/40 dark:bg-slate-700/40 backdrop-blur-md z-50 opacity-0 flex pointer-events-none items-center justify-center p-4 transition-all duration-500"
  >
    <nav
      class="flex flex-col gap-8 text-lg font-medium -translate-y-40 opacity-0 transition-all duration-500"
    >
      <a
        href="/"
        class="transition-colors duration-200 {% if page == 'home' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Home</a
      >
      <a
        href="/search"
        class="transition-colors duration-200 {% if page == 'search' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Search</a
      >
      <a
        href="/about"
        class="transition-colors duration-200 {% if page == 'about' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >About</a
      >
      <a
        href="/friend_links"
        class="transition-colors duration-200 {% if page == 'friend_links' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Friend Links</a
      >
    </nav>
  </div>
  <header
    class="h-16 flex items-center justify-center shadow-sm bg-white dark:bg-slate-700"
  >
    <a
      href="/"
      class="sm:hidden absolute font-cursive text-2xl left-6 hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200 transition-all"
      >lhz07's blog</a
    >
    <nav class="sm:flex hidden space-x-8 text-lg font-medium">
      <a
        href="/"
        class="transition-colors duration-200 {% if page == 'home' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Home</a
      >
      <a
        href="/search"
        class="transition-colors duration-200 {% if page == 'search' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Search</a
      >
      <a
        href="/about"
        class="transition-colors duration-200 {% if page == 'about' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >About</a
      >
      <a
        href="/friend_links"
        class="transition-colors duration-200 {% if page == 'friend_links' %}text-blue-600 dark:text-blue-300{% else %}hover:text-blue-600 dark:hover:text-blue-300 dark:text-slate-200{% endif %}"
        >Friend Links</a
      >
    </nav>
    <button
      id="hamburger-toggle"
      class="sm:hidden absolute right-4 p-2 w-10 h-10 z-50 flex items-center justify-center group text-black dark:text-slate-200 hover:text-blue-600 dark:hover:text-blue-300"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="menu-icon astro-ou4d3k2k"
      >
        <line
          x1="3"
          y1="18"
          x2="21"
          y2="18"
          class="line top origin-[25%_50%] duration-300"
        ></line>
        <line
          x1="3"
          y1="12"
          x2="21"
          y2="12"
          class="line mid origin-center duration-300"
        ></line>
        <line
          x1="3"
          y1="6"
          x2="21"
          y2="6"
          class="line bot origin-[25%_50%] duration-300"
        ></line>
      </svg>
    </button>
    <button
      id="theme-toggle"
      class="flex absolute right-14 sm:right-4 p-2 w-10 h-10 items-center justify-center group text-black dark:text-slate-200 hover:text-blue-600 dark:hover:text-blue-300"
    >
      <!-- Sun icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
        id="icon-sun"
        class="absolute w-[22px] h-[22px] opacity-100 scale-100 rotate-0 transition-all duration-200 ease-in fill-current"
      >
        <path
          d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM80-440q-17 0-28.5-11.5T40-480q0-17 11.5-28.5T80-520h80q17 0 28.5 11.5T200-480q0 17-11.5 28.5T160-440H80Zm720 0q-17 0-28.5-11.5T760-480q0-17 11.5-28.5T800-520h80q17 0 28.5 11.5T920-480q0 17-11.5 28.5T880-440h-80ZM480-760q-17 0-28.5-11.5T440-800v-80q0-17 11.5-28.5T480-920q17 0 28.5 11.5T520-880v80q0 17-11.5 28.5T480-760Zm0 720q-17 0-28.5-11.5T440-80v-80q0-17 11.5-28.5T480-200q17 0 28.5 11.5T520-160v80q0 17-11.5 28.5T480-40ZM226-678l-43-42q-12-11-11.5-28t11.5-29q12-12 29-12t28 12l42 43q11 12 11 28t-11 28q-11 12-27.5 11.5T226-678Zm494 495-42-43q-11-12-11-28.5t11-27.5q11-12 27.5-11.5T734-282l43 42q12 11 11.5 28T777-183q-12 12-29 12t-28-12Zm-42-495q-12-11-11.5-27.5T678-734l42-43q11-12 28-11.5t29 11.5q12 12 12 29t-12 28l-43 42q-12 11-28 11t-28-11ZM183-183q-12-12-12-29t12-28l43-42q12-11 28.5-11t27.5 11q12 11 11.5 27.5T282-226l-42 43q-11 12-28 11.5T183-183Zm297-297Z"
        />
      </svg>
      <!-- Moon icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        id="icon-moon"
        class="absolute w-[22px] h-[22px] opacity-0 scale-75 rotate-90 transition-all duration-200 ease-out fill-current"
        height="24px"
        viewBox="0 -960 960 960"
        width="24px"
      >
        <path
          d="M480-120q-151 0-255.5-104.5T120-480q0-138 90-239.5T440-838q13-2 23 3.5t16 14.5q6 9 6.5 21t-7.5 23q-17 26-25.5 55t-8.5 61q0 90 63 153t153 63q31 0 61.5-9t54.5-25q11-7 22.5-6.5T819-479q10 5 15.5 15t3.5 24q-14 138-117.5 229T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"
        />
      </svg>
    </button>
  </header>
  {% endblock header %}
  <body
    class="flex flex-col justify-between min-h-screen font-sans leading-normal tracking-normal dark:bg-slate-800"
  >
    {% block main %}
    <main class="container flex-1 w-full md:max-w-3xl mx-auto">
      {% block content %}{% endblock content %}
    </main>
    {% endblock main %} {% block footer %}
    <footer class="container mx-auto px-6 pb-2 pt-6 md:max-w-4xl">
      <div class="px-6 py-4 items-center flex flex-col">
        <div class="text-sm text-gray-600 dark:text-gray-400 flex items-center">
          <svg
            x="0px"
            y="0px"
            width="20px"
            height="20px"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="h-4 w-4"
          >
            <path d="M11,6.5V2.2L15.8,7h-4.2C11.2,7,11,6.8,11,6.5z"></path>
            <path
              d="M3.5,12C3.2,12,3,12.2,3,12.5v4C3,16.8,2.8,17,2.5,17S2,16.8,2,16.5V16c0-0.3-0.2-0.5-0.5-0.5S1,15.7,1,16v0.5
	C1,17.3,1.7,18,2.5,18S4,17.3,4,16.5v-4C4,12.2,3.8,12,3.5,12z"
            ></path>
            <path
              d="M5,13.5C5,12.7,5.7,12,6.5,12S8,12.7,8,13.5C8,13.8,7.8,14,7.5,14S7,13.8,7,13.5S6.8,13,6.5,13S6,13.2,6,13.5v0.4
	c0,0.2,0.1,0.4,0.3,0.4l0.9,0.4C7.7,15,8,15.5,8,16.1v0.4C8,17.3,7.3,18,6.5,18S5,17.3,5,16.5C5,16.2,5.2,16,5.5,16S6,16.2,6,16.5
	S6.2,17,6.5,17S7,16.8,7,16.5v-0.4c0-0.2-0.1-0.4-0.3-0.4l-0.9-0.4C5.3,15,5,14.5,5,13.9V13.5z"
            ></path>
            <path
              d="M17,19c-0.2,0-0.4-0.1-0.6-0.2L1.5,3.6c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0l14.9,15.2c0.3,0.3,0.3,0.8,0,1.1
	C17.4,19,17.2,19,17,19z"
            ></path>
            <g>
              <path
                d="M16,13.9V8h-4.5C10.7,8,10,7.3,10,6.5V2H5.5C5.2,2,4.9,2.1,4.6,2.3L16,13.9z"
              ></path>
              <path
                d="M4,4v7.1c0.3,0.1,0.6,0.3,0.8,0.6c1-1,2.6-0.9,3.5,0.1C8.8,12.2,9,12.9,9,13.5c0,0.4-0.2,0.8-0.5,1.1C8.8,15,9,15.6,9,16.1
		v0.4c0,0.6-0.2,1.1-0.5,1.5h6c0.8,0,1.5-0.7,1.5-1.5v-0.3L4,4z"
              ></path>
            </g>
          </svg>
          Works well with little JavaScript
        </div>
        <p class="text-sm text-gray-600 dark:text-gray-400">
          &copy; 2025 by
          <a
            href="https://lhz07.com/"
            class="font-medium text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 hover:text-blue-600 transition-colors duration-200"
          >
            lhz07
          </a>
        </p>
        <a
          href="https://icp.gov.moe/?keyword=20257027"
          class="text-sm text-gray-600 dark:text-gray-400"
          target="_blank"
          >萌ICP备20257027号</a
        >
      </div>
    </footer>
    {% endblock footer %} {% block scripts %}{% endblock scripts %}
  </body>
</html>
