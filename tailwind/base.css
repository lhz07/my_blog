@import "tailwindcss";

@source '../templates/**/*.{html,js}';

@custom-variant dark (&:is(.dark *));

@theme {
    --font-cursive: GreatVibes-Regular, cursive;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentcolor);
    }
}

::-webkit-scrollbar {
    width: 7px; /* 滚动条宽度 */
    height: 7px; /* 滚动条高度 */
}

/* 滚动条轨道颜色 */
::-webkit-scrollbar-track {
    @apply bg-black/0;
}

/* 滚动条滑块颜色 */
::-webkit-scrollbar-thumb {
    @apply bg-[#c1c1c1];
    border-radius: 4px;
}

/* Firefox 独立语法 */
* {
    scrollbar-width: thin;
    scrollbar-color: #c1c1c1
        color-mix(
            in oklab,
            var(--color-black) /* #000 = #000000 */ 0%,
            transparent
        );
}

/* change default footnote return symbol*/
.footnote-backref {
    font-size: 0;
}

.footnote-backref::after {
    content: "⏎";
    font-size: 13px;
}

.footnotes {
    @apply overflow-x-auto;
}

.toc li {
    @apply ml-2 my-1;
}

.toc li a {
    @apply pl-2 py-1 rounded-lg transition-all w-full block hover:bg-gray-100 dark:hover:bg-slate-600;
    font-size: 0.95rem;
}

.toc-active {
    @apply bg-blue-100 dark:bg-blue-500 rounded-lg hover:bg-blue-200! dark:hover:bg-blue-600!;
}

@font-face {
    font-family: "GreatVibes-Regular";
    src: url("/static/fonts/GreatVibes-Regular.ttf") format("truetype");
}

.active {
    @apply bg-blue-500! text-white!;
}
.active:hover {
    /* override */
    @apply bg-blue-600!;
}

.snippet b {
    @apply text-gray-800 bg-[#FFFF00] dark:text-slate-100 dark:bg-blue-500 font-normal;
}

.page-btn {
    @apply inline-flex items-center px-4 py-2 text-sm font-medium dark:border-0 dark:text-slate-100 dark:bg-slate-600 text-gray-600 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 hover:text-gray-800 hover:shadow-md dark:hover:text-white dark:hover:bg-slate-500 transition duration-200 shadow-xs;
}

.page-btn.disabled {
    @apply bg-gray-100 text-gray-300 dark:bg-slate-500 dark:text-slate-600;
    pointer-events: none;
    cursor: not-allowed;
}

/* 代码块样式，带横向滚动和间距 */
/* dark: bg-gray-800 */
.markdown-body pre {
    @apply overflow-x-auto bg-gray-100 dark:bg-slate-600 dark:border-0 rounded-md px-2 pt-2 pb-1 mb-4 border border-gray-300 pl-10;
    white-space: pre; /* 保持空格和换行 */
    counter-reset: line;
}

/* 代码块里的代码字体 */
.markdown-body pre code {
    @apply font-mono text-sm dark:bg-slate-600;
    counter-reset: line;
}

.markdown-body pre code::before {
    content: "";
    /*display: block;*/
}

.markdown-body pre code > * {
    counter-increment: line;
    position: relative;
    /*display: block;*/
}

.markdown-body pre code > *::before {
    @apply pr-3 text-[#666];
    content: counter(line);
    position: absolute;
    left: -3.5em;
    text-align: right;
    width: 3.75em;
    user-select: none;
}

.dark .markdown-body pre code > *::before {
    @apply text-slate-300;
}

.code-group {
    @apply relative;
}

/* copy button */
.copy-btn {
    @apply absolute top-1 right-1 bg-gray-300/0 text-gray-700 px-1 py-1 text-xs rounded-sm hover:bg-gray-300 dark:bg-slate-500/0 dark:text-slate-200 dark:hover:text-slate-100 dark:hover:bg-slate-500 transition-all;
}

.markdown-body h1 {
    @apply text-4xl font-bold mt-6 mb-4;
}
.markdown-body h2 {
    @apply text-3xl font-semibold mb-3;
}
.markdown-body h3 {
    @apply text-2xl font-semibold mt-4 mb-2;
}
.markdown-body h4 {
    @apply text-xl font-medium mt-3 mb-1;
}
.markdown-body h5 {
    @apply text-lg font-medium mt-2 mb-1;
}
.markdown-body h6 {
    @apply text-base font-medium mt-1 mb-1;
}

.markdown-body code {
    @apply bg-gray-100 dark:bg-slate-600 font-mono px-1 py-0.5 rounded-sm;
}

.markdown-body p code,
.markdown-body li code,
.markdown-body blockquote code,
.markdown-body td code,
.markdown-body th code,
.markdown-body ol code,
.markdown-body ul code {
    @apply text-sm wrap-break-word whitespace-pre-wrap;
}

.markdown-body p {
    @apply text-base leading-relaxed mb-4;
}

.markdown-body br {
    @apply block;
}

.markdown-body strong {
    @apply font-bold;
}
.markdown-body em {
    @apply italic;
}
.markdown-body del {
    @apply line-through text-gray-500 dark:text-slate-500;
}
.markdown-body u {
    @apply underline;
}

.markdown-body a {
    @apply text-blue-500 hover:text-blue-600 dark:text-blue-300 dark:hover:text-blue-400 transition duration-200;
}

.markdown-body ul {
    @apply list-disc pl-6 mb-4;
}

.markdown-body ul li {
    @apply mb-2;
}

.markdown-body ol {
    @apply list-decimal pl-6 mb-4 text-base;
}

.markdown-body ol li {
    @apply mb-2;
}

.markdown-body li.task-list-item {
    @apply flex items-center space-x-2;
}

.markdown-body li.task-list-item input[type="checkbox"] {
    @apply w-4 h-4;
}

.markdown-body blockquote {
    @apply border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-4;
}

.markdown-body table {
    display: inline-block;
    overflow-x: auto;
    @apply max-w-full border-collapse border border-gray-300 mb-4;
}

.markdown-body th,
.markdown-body td {
    @apply border border-gray-300 px-4 py-2 text-left;
}

.markdown-body th {
    @apply bg-gray-100 dark:bg-slate-600 dark:text-slate-50 font-semibold text-center;
}

.markdown-body img {
    @apply max-w-full h-auto rounded-sm my-4;
}

.markdown-body hr {
    @apply border-t border-gray-300 my-6;
}

.markdown-body .footnotes {
    @apply border-t border-slate-300 mt-20 pt-4;
}

/*
XCode style adapted for #64748B background
Based on XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>
Modified for dark background compatibility
*/

.hljs {
    @apply dark:bg-[#64748b] dark:text-[#f8f9fa] bg-white text-black;
}

/* Gray DOCTYPE selectors */
.xml .hljs-meta {
    @apply dark:text-[#9ca3af] text-[#c0c0c0];
}

.hljs-comment,
.hljs-quote {
    @apply dark:text-[#86efac] text-[#007400]; /* 明亮的绿色用于注释 */
}

.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {
    @apply dark:text-[#e879f9] text-[#aa0d91]; /* 明亮的紫色用于关键字 */
}

.hljs-variable,
.hljs-template-variable {
    @apply dark:text-[#67e8f9] text-[#3f6e74];
}

.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {
    @apply dark:text-[#fbbf24] text-[#c41a16]; /* 明亮的橙黄色用于字符串 */
}

.hljs-regexp,
.hljs-link {
    @apply dark:text-[#60a5fa] text-[#0e0eff];
}

.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {
    @apply dark:text-[#f87171] dark:font-semibold text-[#1c00cf];
}

.hljs-section,
.hljs-meta {
    @apply dark:text-[#d1d5db] text-[#643820];
}

.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {
    @apply dark:text-[#c084fc] dark:font-medium text-[#5c2699];
}

.hljs-attr {
    @apply dark:text-[#fde047] text-[#836c28];
}

.hljs-subst {
    @apply dark:text-[#f8f9fa] text-black;
}

.hljs-formula {
    @apply dark:bg-[#475569] dark:text-[#e2e8f0] italic bg-[#eee];
}

.hljs-addition {
    @apply dark:bg-[#065f46] dark:text-[#d1fae5] bg-[#baeeba];
}

.hljs-deletion {
    @apply dark:bg-[#7f1d1d] dark:text-[#fecaca] bg-[#ffc8bd];
}

.hljs-selector-id,
.hljs-selector-class {
    @apply dark:text-[#fdba74] text-[#9b703f];
}

.hljs-doctag,
.hljs-strong {
    font-weight: bold;
}

.hljs-emphasis {
    font-style: italic;
}
